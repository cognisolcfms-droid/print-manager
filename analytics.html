<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Business Insights - CogniSol | CFMS</title>

    <meta http-equiv="Content-Security-Policy" content="
        default-src 'self';
        script-src 'self';
        style-src 'self';
        img-src 'self' data:;
        connect-src 'self';
        font-src 'self';
        object-src 'none';
        base-uri 'self';
        form-action 'self';
    ">

    <link rel="stylesheet" href="analytics.css">
    <script src="lib/chart.min.js" defer></script>
    <script src="analytics.js" defer></script>
</head>

<body class="analytics-body">

<div class="analytics-container">

    <header class="analytics-header">
        <button id="backBtn" class="back-btn">←</button>

        <div class="header-text">
            <h1>Business Insights</h1>
            <p>Real-time performance metrics & revenue data</p>
        </div>

        <div class="header-actions">
            <select id="date-filter">
                <option value="7">Last 7 Days</option>
                <option value="30" selected>Last 30 Days</option>
                <option value="90">Last 90 Days</option>
                <option value="365">Last 1 Year</option>
            </select>
        </div>
    </header>

    <div class="kpi-row">
        <div class="kpi-card">
            <div class="kpi-title">Total Revenue</div>
            <div class="kpi-value" id="kpi-total-revenue">₹0</div>
        </div>

        <div class="kpi-card">
            <div class="kpi-title">Total Orders</div>
            <div class="kpi-value" id="kpi-total-orders">0</div>
        </div>

        <div class="kpi-card">
            <div class="kpi-title">Average Order</div>
            <div class="kpi-value" id="kpi-avg-order">₹0</div>
        </div>

        <div class="kpi-card highlight">
            <div class="kpi-title">Net Revenue</div>
            <div class="kpi-value" id="kpi-net-profit">₹0</div>
        </div>
    </div>

    <div class="ad-container-top">
        <span>Advertisement Slot</span>
    </div>

    <div class="analytics-grid">

        <div class="analytics-card">
            <div class="card-header">
                <h3>Revenue Distribution</h3>
                <span class="badge">Live</span>
            </div>

            <div class="chart-container">
                <canvas id="revenueChart"></canvas>
                <div id="chart-loader" class="chart-loader">
                    Loading analytics...
                </div>
            </div>

            <div class="metrics-summary" id="revenue-metrics"></div>
        </div>

        <div class="analytics-card">
            <div class="card-header">
                <h3>Top Performing Services</h3>
            </div>

            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>Service</th>
                            <th class="text-center">Orders</th>
                            <th class="text-right">Yield</th>
                        </tr>
                    </thead>
                    <tbody id="top-services-body"></tbody>
                </table>
            </div>
        </div>

    </div>

    <div class="ad-container-bottom">
        <span>Sponsored Insight Block</span>
    </div>

    <footer class="analytics-footer">
        <p>© 2026 CogniSol | CFMS</p>
    </footer>

</div>

</body>
</html>
